<!DOCTYPE html>
<html lang="en">
  <% include('partials/header') %>
  <body
    class="bg-gray-100 font-sans leading-normal tracking-normal flex flex-col min-h-screen"
  >
    <!-- Navigation -->
    <nav class="bg-gray-800 p-4 shadow-lg text-white mb-8">
      <div class="max-w-7xl mx-auto px-4 flex justify-between items-center">
        <a href="/" class="text-xl font-bold">DevCamper</a>
        <div>
          <a href="/api/v1/bootcamps" class="hover:text-gray-300 mr-4"
            >Bootcamps</a
          >
        </div>
      </div>
    </nav>

    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-grow w-full">
      <!-- Header -->
      <div
        class="mb-8 flex flex-col md:flex-row justify-between items-start md:items-center"
      >
        <div>
          <h1 class="text-3xl font-bold text-gray-900 mb-2">
            Reviews for <%= bootcamp.name ? bootcamp.name : 'N/A' %>
          </h1>
          <div class="flex items-center text-yellow-500">
            <span class="font-bold text-xl mr-2"
              ><%= bootcamp.averageRating ? bootcamp.averageRating.toFixed(1) :
              'N/A' %></span
            >
            <div class="flex text-sm">
              <% for(let i=1; i<=10; i++) { %>
              <i
                class="<%= i <= Math.round(bootcamp.averageRating) ? 'fas' : 'far' %> fa-star"
              ></i>
              <% } %>
            </div>
          </div>
        </div>
        <a
          href="/api/v1/bootcamps/<%= bootcamp._id %>/reviews/create"
          class="mt-4 md:mt-0 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-6 rounded-lg transition duration-200 shadow-md"
        >
          <i class="fas fa-pencil-alt mr-2"></i> Write a Review
        </a>
      </div>

      <!-- Reviews List -->
      <div class="space-y-6">
        <% if (reviews.length === 0) { %>
        <div
          class="bg-white rounded-lg shadow-md p-8 text-center text-gray-500"
        >
          <p class="text-xl">No reviews yet. Be the first to review!</p>
        </div>
        <% } else { %> <% reviews.forEach(review => { %>
        <div class="bg-white rounded-lg shadow-md overflow-hidden">
          <div class="p-6">
            <div class="flex justify-between items-start mb-4">
              <div>
                <h3 class="text-xl font-bold text-gray-800 mb-1">
                  <%= review.title %>
                </h3>
                <div class="flex items-center text-yellow-500 text-sm">
                  <span class="font-bold mr-1"><%= review.rating %></span>
                  <span>/ 10</span>
                </div>
              </div>
              <span
                class="bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full uppercase tracking-wide font-semibold"
              >
                by <%= review.user ? review.user.name : 'Anonymous' %>
              </span>
            </div>
            <p class="text-gray-600 leading-relaxed"><%= review.text %></p>
          </div>
        </div>
        <% }) %> <% } %>
      </div>

      <div class="mt-8">
        <a
          href="/api/v1/bootcamps/<%= bootcamp._id %>"
          class="text-indigo-600 hover:text-indigo-800 font-medium flex items-center"
        >
          <i class="fas fa-arrow-left mr-2"></i> Back to Bootcamp Details
        </a>
      </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-auto">
      <div class="max-w-7xl mx-auto px-4 text-center">
        <p>&copy; 2025 DevCamper. All rights reserved.</p>
      </div>
    </footer>
  </body>
</html>
